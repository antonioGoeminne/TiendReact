(this["webpackJsonptienda-react"]=this["webpackJsonptienda-react"]||[]).push([[0],{38:function(e,t,c){},41:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){"use strict";c.r(t);var n=c(2),i=c.n(n),a=c(31),r=c.n(a),s=c(6),j=c(4),o=(c(38),c.p+"static/media/cartWidget.cb308e39.svg"),l=c(33),d=c(7),b=c(21),u=(c(29),c(1)),m=Object(n.createContext)(),O=function(e){var t=e.children,c=Object(n.useState)([]),i=Object(d.a)(c,2),a=i[0],r=i[1],s=Object(n.useState)(0),j=Object(d.a)(s,2),o=j[0],O=j[1],x=Object(n.useState)(0),h=Object(d.a)(x,2),f=h[0],p=h[1];return Object(u.jsx)(m.Provider,{value:{cart:a,addItem:function(e,t){if(a.length>0)if(i=e.id,a.some((function(e){return e.item.id===i}))){var c=a.findIndex((function(t){return t.item.id===e.id})),n=a;n[c].quantity+=t,r(n)}else r([].concat(Object(l.a)(a),[{item:e,quantity:t}]));else r([{item:e,quantity:t}]);var i},setTotal:O,total:o,setProductQuantity:p,productQuantity:f,removeItem:function(e){r(a.filter((function(t){return t.item.id!==e})))},getOrder:function(e,t){return e=a.map((function(e){var t=e.item;return{id:t.id,title:t.title,price:t.price}})),{user:t={name:t.name,surname:t.surname,email:t.email,date:b.a.firestore.Timestamp.fromDate(new Date)},items:e,total:o}},restartCart:function(){a.splice(0,a.length),p(0)}},children:t})},x=(c(41),function(){var e=Object(n.useContext)(m).productQuantity;return Object(u.jsxs)(s.b,{to:"/cart",children:[Object(u.jsx)("img",{className:"cart",src:o,alt:"cart"}),Object(u.jsx)("div",{className:"product-quantity",children:Object(u.jsx)("p",{children:e})})]})}),h=function(e){var t=e.onClick;return Object(u.jsxs)("nav",{className:"main-nav",children:[Object(u.jsx)(s.b,{to:"/TiendReact",children:Object(u.jsx)("h2",{className:"brand-nav",children:"Tienda libros "})}),Object(u.jsxs)("ul",{className:"click-categories",children:[Object(u.jsx)(s.c,{to:"/category/ficcion",children:Object(u.jsx)("li",{onClick:t,children:"ficcion"})}),Object(u.jsx)(s.c,{to:"/category/ciencia",children:Object(u.jsx)("li",{onClick:t,children:"Ciencia"})}),Object(u.jsx)(s.c,{to:"/category/romance",children:Object(u.jsx)("li",{onClick:t,children:"Romance"})})]}),Object(u.jsx)(x,{})]})},f=c(15),p=(c(46),c(47),function(e){var t=e.item,c=t.id,n=t.name,i=t.author,a=t.price,r=t.pictureURL;return Object(u.jsx)(s.b,{to:"/item/".concat(c),children:Object(u.jsxs)("div",{id:c,className:"item-wrap",children:[Object(u.jsx)("div",{className:"img-wrap",children:Object(u.jsx)("img",{alt:"picture_product",src:r})}),Object(u.jsxs)("div",{className:"item-info",children:[Object(u.jsx)("h2",{children:n}),Object(u.jsx)("h3",{children:i}),Object(u.jsxs)("p",{children:["$",a]})]}),Object(u.jsx)("div",{className:"show-menu",children:Object(u.jsx)("div",{children:"Ver detalle"})})]})})}),v=function(e){var t=e.items;return Object(u.jsx)("div",{className:"item-list",children:t.map((function(e){return Object(u.jsx)(p,{item:e},e.id)}))})},g=(c(48),function(){return Object(u.jsx)("div",{className:"loader-wrap"})}),N=(c(49),b.a.initializeApp({apiKey:"AIzaSyBW65HBs3ZmPg8daIN1rUCf411c1twdOdg",authDomain:"tiendabuscalibrosreact.firebaseapp.com",projectId:"tiendabuscalibrosreact",storageBucket:"tiendabuscalibrosreact.appspot.com",messagingSenderId:"46444143741",appId:"1:46444143741:web:1bd6d3ba8ac3fe48da7d14",measurementId:"G-N5TJXCTSBT"}).firestore()),C=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(!1),r=Object(d.a)(a,2),s=r[0],o=r[1],l=Object(j.f)().id;return Object(n.useEffect)((function(){N.collection("libros").get().then((function(e){if(0===e.size)console.log("no results");else{o(!0);var t=e.docs.map((function(e){return Object(f.a)({id:e.id},e.data())})),c=l?t.filter((function(e){return e.category===l})):t;i(c)}})).catch((function(e){console.log("error searching items",e)})).finally(o(!1))}),[l]),Object(u.jsx)("section",{children:!0===s?Object(u.jsx)(v,{items:c}):Object(u.jsx)(g,{})})},y=function(){return Object(u.jsxs)(n.Fragment,{children:[Object(u.jsx)(h,{}),Object(u.jsx)(C,{})]})},k=function(){return Object(u.jsx)(y,{})},w=(c(50),c(51),function(e){var t=e.onAdd,c=e.initial,i=void 0===c?1:c,a=e.stock,r=Object(n.useState)(i),s=Object(d.a)(r,2),j=s[0],o=s[1],l=function(e){"+"===e?a>j&&o(j+1):"-"===e&&j>1&&o(j-1)};return Object(u.jsx)(n.Fragment,{children:Object(u.jsxs)("div",{id:"itemDetailBuying",className:"item-count-wrap",children:[Object(u.jsxs)("div",{className:"item-count-number",stock:a,children:[Object(u.jsx)("img",{id:"quitProduct",onClick:function(){return l("-")},alt:"-",src:"https://image.flaticon.com/icons/png/512/149/149157.png"}),Object(u.jsx)("p",{children:j}),Object(u.jsx)("img",{id:"addProduct",onClick:function(){return l("+")},alt:"+",src:"https://image.flaticon.com/icons/png/512/748/748113.png"})]}),Object(u.jsx)("button",{type:"submit",className:"item-count-button",onClick:function(){return t(j)},disabled:!a,value:j,children:"Agregar al carrito"})]})})}),S=function(e){var t=e.item,c=t.author,i=t.id,a=t.name,r=t.pictureURL,j=t.price,o=Object(n.useState)(1),l=Object(d.a)(o,2),b=l[0],O=l[1],x=Object(n.useState)(!1),h=Object(d.a)(x,2),f=h[0],p=h[1],v=Object(n.useContext)(m).addItem;return Object(u.jsxs)("div",{className:"item-detail-wrap",id:i,children:[Object(u.jsx)("img",{src:r,alt:"picture"}),Object(u.jsxs)("div",{className:"item-title-details",children:[Object(u.jsx)("h1",{children:a}),Object(u.jsx)("h1",{children:c}),Object(u.jsxs)("h2",{children:["$",j]})]}),0==f?Object(u.jsx)(w,{stock:20,onAdd:function(e){O(e),p(!0)}}):Object(u.jsx)(s.b,{to:"/cart",children:Object(u.jsx)("div",{className:"item-buyed",onClick:function(){return v(t,b)},children:"deseas confirmar la compra?"})})]})},I=function(){var e=Object(j.f)().id,t=Object(n.useState)([]),c=Object(d.a)(t,2),i=c[0],a=c[1],r=Object(n.useState)(!1),s=Object(d.a)(r,2),o=s[0],l=s[1];return Object(n.useEffect)((function(){N.collection("libros").doc(e).get().then((function(e){l(!0),e.exists?a(Object(f.a)({id:e.id},e.data())):console.log("no results")})).catch((function(e){console.log("error searching items",e)})).finally(l(!1))}),[]),Object(u.jsx)(n.Fragment,{children:1==o?Object(u.jsx)(S,{item:i}):Object(u.jsx)(g,{})})},T=function(e){return Object(u.jsxs)(n.Fragment,{children:[Object(u.jsx)(h,{}),Object(u.jsx)(I,{children:Object(u.jsx)(w,{stock:20})})]})},P=function(){return Object(u.jsx)(T,{})},q=c(22),B=(c(52),c(53),function(e){var t=e.id,c=e.user,i=Object(n.useContext)(m).restartCart;return Object(u.jsx)(n.Fragment,{children:Object(u.jsxs)("div",{className:"order-wrap",children:[Object(u.jsx)("h2",{className:"order--title",children:"Compra realizada con Exito!"}),Object(u.jsxs)("p",{className:"order--info",children:["id de compra: ",t," "]}),Object(u.jsxs)("p",{className:"order--info",children:["usuario: ",c," "]}),Object(u.jsx)(s.b,{exact:!0,path:!0,to:"/",children:Object(u.jsx)("div",{className:"order--button",onClick:i,children:"Ver Productos"})})]})})}),F=function(){var e=Object(n.useContext)(m),t=e.getOrder,c=e.cart,i=Object(n.useState)([]),a=Object(d.a)(i,2),r=a[0],s=a[1],j=Object(n.useState)(!1),o=Object(d.a)(j,2),l=o[0],b=o[1],O=Object(n.useState)({name:"",surname:"",email:""}),x=Object(d.a)(O,2),h=x[0],p=x[1],v=function(e){var t=e.target,c=Object(f.a)(Object(f.a)({},h),{},Object(q.a)({},t.name,t.value));" "!=c?p(c):alert(" no se puede asi")};return Object(u.jsx)("div",{className:"form-wrap",children:1!=l?Object(u.jsxs)("form",{className:"buy-form",children:[Object(u.jsx)("label",{children:"nombre"}),Object(u.jsx)("input",{className:"form-name",name:"name",onChange:v,value:h.name}),Object(u.jsx)("label",{children:"apellido"}),Object(u.jsx)("input",{className:"form-surname",name:"surname",onChange:v,value:h.surname}),Object(u.jsx)("label",{children:"email"}),Object(u.jsx)("input",{className:"form-email",type:"email",name:"email",onChange:v,value:h.email}),Object(u.jsx)("button",{type:"submit",className:"form-btn__confirm",onClick:function(e){e.preventDefault();var n=N.collection("orders");if(""!=h.name&&""!=h.surname&&""!=h.email){var i=t(c,h);n.add(i).then((function(e){var t=e.id;s(t)})).catch((function(e){console.log(e)})),b(!0)}},children:"Confirmar Pedido"})]}):Object(u.jsx)(B,{id:r,user:h.name})})},R=c.p+"static/media/deleteButton.1129c53a.svg",A=(c(54),function(){var e=Object(n.useContext)(m),t=e.cart,c=e.setTotal,i=e.total,a=e.setProductQuantity,r=e.removeItem;return Object(n.useEffect)((function(){var e=t.map((function(e){var t=e.item,c=e.quantity;return t.price*c})).reduce((function(e,t){return e+t}),0);if(e>0){var n=t.map((function(e){return e.quantity})).reduce((function(e,t){return e+t}));a(n)}else a(0);c(e)}),[t]),Object(u.jsxs)(n.Fragment,{children:[t.map((function(e){var t=e.item.price*e.quantity;return Object(u.jsxs)("div",{className:"cart-wrap",children:[Object(u.jsxs)("div",{className:"book-wrap",children:[Object(u.jsx)("img",{src:e.item.pictureURL,className:"book-picture"}),Object(u.jsxs)("div",{className:"book-info",children:[Object(u.jsx)("h2",{className:"book-title"}),Object(u.jsx)("h3",{className:"book-author"})]})]}),Object(u.jsxs)("div",{className:"subTotal-price-wrap",children:[Object(u.jsx)("img",{className:"remove-item",src:R,onClick:function(){return r(e.item.id)}}),Object(u.jsxs)("div",{className:"price-wrap",children:[Object(u.jsx)("h3",{children:"Precio"}),Object(u.jsxs)("h3",{children:["$",e.item.price]})]}),Object(u.jsxs)("div",{className:"price-wrap",children:[Object(u.jsx)("h3",{children:"Cantidad"}),Object(u.jsx)("h3",{children:e.quantity})]}),Object(u.jsxs)("div",{className:"price-wrap",children:[Object(u.jsx)("h3",{children:"subtotal"}),Object(u.jsxs)("h3",{children:["$",t]})]})]})]})})),t.length>0?Object(u.jsxs)("div",{className:"total-price",children:[Object(u.jsxs)("p",{className:"total-price-text",children:["Precio Total:$",i]}),Object(u.jsx)(s.b,{to:"./order",children:Object(u.jsx)("button",{className:"total-price-btn-confirm",children:"Confirmar Compra"})})]}):Object(u.jsx)("div",{className:"total-price__empty-cart",children:"Aun no tienes productos en el carrito"})]})}),D=function(){return Object(u.jsxs)(n.Fragment,{children:[Object(u.jsx)(h,{}),Object(u.jsx)(A,{})]})},E=function(){return Object(u.jsx)(D,{})};var $=function(){return Object(u.jsx)(O,{children:Object(u.jsx)(s.a,{children:Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{exact:!0,path:"/TiendReact",children:Object(u.jsx)(k,{})}),Object(u.jsx)(j.a,{exact:!0,path:"/category/:id",children:Object(u.jsx)(k,{})}),Object(u.jsx)(j.a,{exact:!0,path:"/item/:id",children:Object(u.jsx)(P,{})}),Object(u.jsx)(j.a,{exact:!0,path:"/cart",children:Object(u.jsx)(E,{})}),Object(u.jsx)(j.a,{exact:!0,path:"/order",children:Object(u.jsx)(F,{})}),Object(u.jsx)(j.a,{path:"*",children:Object(u.jsx)(s.b,{to:"/TiendReact",children:Object(u.jsx)("h3",{children:"error 404"})})})]})})})};c(55);r.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)($,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.5f93ea6c.chunk.js.map